(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["projects.messages"],{"10cf":function(e,t,s){"use strict";var a=s("2918"),r=s.n(a);r.a},2195:function(e,t,s){"use strict";var a=s("794b"),r=s.n(a);r.a},"21df":function(e,t,s){"use strict";var a=s("be38"),r=s.n(a);r.a},2918:function(e,t,s){},"77a6":function(e,t,s){"use strict";var a=s("c327"),r=s.n(a);r.a},"794b":function(e,t,s){},a1ec:function(e,t,s){"use strict";var a=s("ac4c"),r=s.n(a);r.a},ac4c:function(e,t,s){},be38:function(e,t,s){},c327:function(e,t,s){},d59b:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"project-overview"},["undefined"!==typeof e.getActiveUserData.user&&Object.keys(e.getActiveUserData.user).length?s("div",["admin"==e.getActiveUserData.userRoles?s("adminvue-projects-messages-vue"):"salesteamlead"==e.getActiveUserData.userRoles?s("salesteamleadvue-projects-messages-vue"):"salesperson"==e.getActiveUserData.userRoles?s("salespersonvue-projects-messages-vue"):"client"==e.getActiveUserData.userRoles?s("clientvue-projects-messages-vue"):s("default-projects-messages-vue")],1):s("div",{staticClass:"white-row loader-route"},[e._m(0)])])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"lds-sub-ripple"},[s("div"),s("div")])}],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"project-files-tb"},[s("transition",{attrs:{name:"fade",mode:"out-in"},on:{beforeLeave:e.beforeLeave,enter:e.enter,afterEnter:e.afterEnter}},[e.loader?s("div",{key:"1",staticClass:"white-row loader-route"},[s("div",{staticClass:"lds-sub-ripple"},[s("div"),s("div")])]):s("div",{key:"2",staticClass:"project-messages-wrapper"},[s("section",{staticClass:"messages-heading-top"},[s("div",{staticClass:"top-area"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-8 col-lg-8 col-md-8 col-sm-6"},[s("div",{},[s("h4",{staticClass:"general-sub-heading"},[e._v(" Messages "),s("a",{staticClass:"refreshData",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.refreshProjectMessages(t)}}},[s("i",{staticClass:"fas fa-redo-alt"})])])])]),s("div",{staticClass:"col-xl-4 col-lg-4 col-md-4 col-sm-6"},[s("div",{staticClass:"general-filters form-area text-right"},[s("button",{staticClass:"btn btn-primary default-global-btn",on:{click:e.showHideMessageModel}},[e._v(" Create a New Thread ")])])])])])]),s("section",{staticClass:"upload-file-form-area"},[s("transition",{attrs:{name:"slide"}},[s("form",{directives:[{name:"show",rawName:"v-show",value:e.showMessageModel,expression:"showMessageModel"}],staticClass:"main-thread-message-form",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"thread_title"}},[e._v("Enter Thread Title")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.thread_title,expression:"formData.thread_title"}],staticClass:"form-control",class:{"input-border-errors":e.$v.formData.thread_title.$dirty&&!e.$v.formData.thread_title.required},attrs:{type:"text"},domProps:{value:e.formData.thread_title},on:{input:function(t){t.target.composing||e.$set(e.formData,"thread_title",t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"messagebody"}},[e._v("Enter Thread Body")]),s("ckeditor",{class:{"input-border-errors":e.$v.formData.messagebody.$dirty&&!e.$v.formData.messagebody.required},attrs:{config:e.editorConfig},model:{value:e.formData.messagebody,callback:function(t){e.$set(e.formData,"messagebody",t)},expression:"formData.messagebody"}})],1),s("dropzone",{ref:"createPost",attrs:{id:"foo",options:e.options},on:{"vdropzone-sending":e.sendingEvent,"vdropzone-success":e.successEvent,"vdropzone-error":e.errorEvent,"vdropzone-success-multiple":e.multipleUploadComplete,"vdropzone-error-multiple":e.multipleServerError}}),s("div",{staticClass:"form-actions"},[s("button",{staticClass:"btn btn-primary default-global-btn",attrs:{disabled:e.disableSubmitBtn,type:"submit",id:"save-form"}},[e._v(" Create Message ")]),e.disableSubmitBtn?s("div",{staticClass:"form_submit_loader"},[s("div",{staticClass:"lds-ellipsis"},[s("div"),s("div"),s("div"),s("div")])]):e._e()])],1)])],1),s("section",{staticClass:"thread-listing"},["undefined"!==typeof e.project_messages.data&&Object.keys(e.project_messages.data).length?s("div",{staticClass:"message-thread-wrapper"},[e.sub_loader?s("div",{staticClass:"white-row loader-route subloader"},[s("div",{staticClass:"lds-sub-ripple"},[s("div"),s("div")])]):e._e(),e._l(e.project_messages.data,(function(t,a){return s("div",{key:a,staticClass:"thr-loop-row margin-top-20"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-4 col-lg-4 col-md-12 col-sm-12"},[s("div",{staticClass:"thrd-name"},[s("router-link",{staticClass:"eclipse-para color-blk customize-global-link gl-lk-blk",attrs:{to:{path:"/projects/show/"+e.$route.params.project_id+"/messages/show/"+t.id},tag:"a"}},[e._v(" "+e._s(t.porject_thread_subtitle)+" ")])],1)]),s("div",{staticClass:"col-xl-6 col-lg-6 col-md-8 col-sm-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-3 col-lg-3 col-md-3 col-sm-12"},[s("div",{staticClass:"per-name"},[s("p",{staticClass:"eclipse-para"},[e._v(" "+e._s(t.last_message.user.name)+" ")])])]),s("div",{staticClass:"col-xl-9 col-lg-9 col-md-9 col-sm-12"},[s("div",{staticClass:"pers-last-mesg"},[s("p",{staticClass:"eclipse-para"},[e._v(" "+e._s(t.last_message.message)+" ")])])])])]),s("div",{staticClass:"col-xl-2 col-lg-2 col-md-4 col-sm-12"},[s("div",{staticClass:"thr-time text-right"},[e._v(" "+e._s(t.last_message.created_at)+" ")])])])])}))],2):s("div",{staticClass:"message-thread-wrapper"},[s("div",{staticClass:"thr-loop-row margin-top-20"},[s("no-record-found")],1)])])])])],1)},i=[],l=(s("96cf"),s("1da1")),n=s("09ad"),c=s.n(n),d=(s("1ed5"),s("1157")),m=s.n(d),u=s("1dce"),p=s("c987"),h=s("b5ae"),g=h.required,v=(h.minLength,h.email,h.numeric,h.url,{mixins:[u["validationMixin"]],components:{Dropzone:c.a,"no-record-found":p["a"]},computed:{},validations:{formData:{thread_title:{required:g},messagebody:{required:g}}},data:function(){return{project_messages:{},sub_loader:!0,loader:!0,threadListing:{},disableSubmitBtn:!1,updateListDataView:!1,refreshThumbData:!1,doc_file_url:"https://pncworkbench.com/img/file_doc.png",excel_file_url:"https://pncworkbench.com/img/excel.png",global_image_url:"https://pncworkbench.com/img/archive.png",psd_url:"https://pncworkbench.com/img/psd.png",roleurl:"https://pncworkbench.com",pre:"",showMessageModel:!1,projectFilesThumbView:{},formData:{thread_title:"",project_id:this.$route.params.project_id,messagebody:""},editorData:"",editorConfig:{toolbarGroups:[{name:"document",groups:["mode","document","doctools"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}],extraPlugins:"font",disableNativeSpellChecker:!1},options:{addRemoveLinks:!0,autoProcessQueue:!1,parallelUploads:1e5,timeout:5e5,maxFilesize:500,uploadMultiple:!0,withCredentials:!0,url:window.api_homeurl+"/thread-message/store"}}},mounted:function(){this.getProjectMessages()},methods:{refreshProjectMessages:function(){this.getProjectMessages()},onSubmit:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=t,a.disableSubmitBtn=!0,a.$v.$touch(),!a.$v.$invalid){s.next=7;break}return a.$store.dispatch("showtostrMessageNotifications",{message:"Please fill all the fields to proceed form!",type:"error"}),a.disableSubmitBtn=!1,s.abrupt("return");case 7:if(!(t.$refs.createPost.dropzone.files.length>0)){s.next=11;break}t.$refs.createPost.processQueue(),s.next=15;break;case 11:return r=a.$store.dispatch("postHttp",{url:"thread-message/store",formDetails:t.formData,formEvent:e.target}),s.next=14,r.then((function(t){"undefined"!==typeof t&&(a.$store.dispatch("displayMessageErrors",{response:t,formEvent:e.target}),a.$router.push({path:"/projects/show/"+a.$route.params.project_id+"/messages/show/"+t.data.thread_id}),a.disableSubmitBtn=!1)}));case 14:a.disableSubmitBtn=!1;case 15:case"end":return s.stop()}}),s)})))()},getProjectMessages:function(){var e=arguments,t=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.length>0&&void 0!==e[0]?e[0]:1,e.length>1&&void 0!==e[1]?e[1]:null,a=t,a.sub_loader=!0,r=a.$store.dispatch("getHttp",{url:"thread-message/get-project-messages-data/"+t.$route.params.project_id+"?&timezone="+Intl.DateTimeFormat().resolvedOptions().timeZone}),s.next=7,r.then((function(e){"undefined"!==typeof e&&(a.project_messages=e.data),a.loader=!1,a.sub_loader=!1}));case 7:case"end":return s.stop()}}),s)})))()},showHideMessageModel:function(){this.showMessageModel?this.showMessageModel=!1:this.showMessageModel=!0},sendingEvent:function(e,t,s){s.append("messagebody",this.formData.messagebody),s.append("thread_title",this.formData.thread_title),s.append("project_id",this.formData.project_id)},successEvent:function(e,t){},multipleUploadComplete:function(e,t){var s=this;s.$store.dispatch("showtostrMessageNotifications",{message:t.message,type:t.status}),s.$router.push({path:"/projects/show/"+s.$route.params.project_id+"/messages/show/"+t.thread_id}),s.disableSubmitBtn=!1},multipleServerError:function(e,t){if(t.error)this.showtostrMessages(t.error,"error");else{this.showtostrMessages(t.message,"error");var s=this;m.a.each(t.errors,(function(e,t){s.displayErrors(e)}))}this.disableSubmitBtn=!1},errorEvent:function(e,t,s){return e.status="queued",e.previewElement.classList.remove("dz-error")},beforeLeave:function(e){this.prevHeight=getComputedStyle(e).height},enter:function(e){var t=getComputedStyle(e),s=t.height;e.style.height=this.prevHeight,setTimeout((function(){e.style.height=s}))},afterEnter:function(e){e.style.height="auto"}}}),f=v,b=(s("2195"),s("2877")),_=Object(b["a"])(f,o,i,!1,null,"4f0abefe",null),C=_.exports,w=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"project-files-tb"},[s("transition",{attrs:{name:"fade",mode:"out-in"},on:{beforeLeave:e.beforeLeave,enter:e.enter,afterEnter:e.afterEnter}},[e.loader?s("div",{key:"1",staticClass:"white-row loader-route"},[s("div",{staticClass:"lds-sub-ripple"},[s("div"),s("div")])]):s("div",{key:"2",staticClass:"project-messages-wrapper"},[s("section",{staticClass:"messages-heading-top"},[s("div",{staticClass:"top-area"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-8 col-lg-8 col-md-8 col-sm-6"},[s("div",{},[s("h4",{staticClass:"general-sub-heading"},[e._v(" Messages "),s("a",{staticClass:"refreshData",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.refreshProjectMessages(t)}}},[s("i",{staticClass:"fas fa-redo-alt"})])])])]),s("div",{staticClass:"col-xl-4 col-lg-4 col-md-4 col-sm-6"},[s("div",{staticClass:"general-filters form-area text-right"},[s("button",{staticClass:"btn btn-primary default-global-btn",on:{click:e.showHideMessageModel}},[e._v(" Create a New Thread ")])])])])])]),s("section",{staticClass:"upload-file-form-area"},[s("transition",{attrs:{name:"slide"}},[s("form",{directives:[{name:"show",rawName:"v-show",value:e.showMessageModel,expression:"showMessageModel"}],staticClass:"main-thread-message-form",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"thread_title"}},[e._v("Enter Thread Title")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.thread_title,expression:"formData.thread_title"}],staticClass:"form-control",class:{"input-border-errors":e.$v.formData.thread_title.$dirty&&!e.$v.formData.thread_title.required},attrs:{type:"text"},domProps:{value:e.formData.thread_title},on:{input:function(t){t.target.composing||e.$set(e.formData,"thread_title",t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"messagebody"}},[e._v("Enter Thread Body")]),s("ckeditor",{class:{"input-border-errors":e.$v.formData.messagebody.$dirty&&!e.$v.formData.messagebody.required},attrs:{config:e.editorConfig},model:{value:e.formData.messagebody,callback:function(t){e.$set(e.formData,"messagebody",t)},expression:"formData.messagebody"}})],1),s("dropzone",{ref:"createPost",attrs:{id:"foo",options:e.options},on:{"vdropzone-sending":e.sendingEvent,"vdropzone-success":e.successEvent,"vdropzone-error":e.errorEvent,"vdropzone-success-multiple":e.multipleUploadComplete,"vdropzone-error-multiple":e.multipleServerError}}),s("div",{staticClass:"form-actions"},[s("button",{staticClass:"btn btn-primary default-global-btn",attrs:{disabled:e.disableSubmitBtn,type:"submit",id:"save-form"}},[e._v(" Create Message ")]),e.disableSubmitBtn?s("div",{staticClass:"form_submit_loader"},[s("div",{staticClass:"lds-ellipsis"},[s("div"),s("div"),s("div"),s("div")])]):e._e()])],1)])],1),s("section",{staticClass:"thread-listing"},["undefined"!==typeof e.project_messages.data&&Object.keys(e.project_messages.data).length?s("div",{staticClass:"message-thread-wrapper"},[e.sub_loader?s("div",{staticClass:"white-row loader-route subloader"},[s("div",{staticClass:"lds-sub-ripple"},[s("div"),s("div")])]):e._e(),e._l(e.project_messages.data,(function(t,a){return s("div",{key:a,staticClass:"thr-loop-row margin-top-20"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-4 col-lg-4 col-md-12 col-sm-12"},[s("div",{staticClass:"thrd-name"},[s("router-link",{staticClass:"eclipse-para color-blk customize-global-link gl-lk-blk",attrs:{to:{path:"/projects/show/"+e.$route.params.project_id+"/messages/show/"+t.id},tag:"a"}},[e._v(" "+e._s(t.porject_thread_subtitle)+" ")])],1)]),s("div",{staticClass:"col-xl-6 col-lg-6 col-md-8 col-sm-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-3 col-lg-3 col-md-3 col-sm-12"},[s("div",{staticClass:"per-name"},[s("p",{staticClass:"eclipse-para"},[e._v(" "+e._s(t.last_message.user.name)+" ")])])]),s("div",{staticClass:"col-xl-9 col-lg-9 col-md-9 col-sm-12"},[s("div",{staticClass:"pers-last-mesg"},[s("p",{staticClass:"eclipse-para"},[e._v(" "+e._s(t.last_message.message)+" ")])])])])]),s("div",{staticClass:"col-xl-2 col-lg-2 col-md-4 col-sm-12"},[s("div",{staticClass:"thr-time text-right"},[e._v(" "+e._s(t.last_message.created_at)+" ")])])])])}))],2):s("div",{staticClass:"message-thread-wrapper"},[s("div",{staticClass:"thr-loop-row margin-top-20"},[s("no-record-found")],1)])])])])],1)},y=[],j=s("b5ae"),M=j.required,k=(j.minLength,j.email,j.numeric,j.url,{mixins:[u["validationMixin"]],components:{Dropzone:c.a,"no-record-found":p["a"]},computed:{},validations:{formData:{thread_title:{required:M},messagebody:{required:M}}},data:function(){return{project_messages:{},loader:!0,sub_loader:!0,threadListing:{},disableSubmitBtn:!1,updateListDataView:!1,refreshThumbData:!1,doc_file_url:"https://pncworkbench.com/img/file_doc.png",excel_file_url:"https://pncworkbench.com/img/excel.png",global_image_url:"https://pncworkbench.com/img/archive.png",psd_url:"https://pncworkbench.com/img/psd.png",roleurl:"https://pncworkbench.com",pre:"",showMessageModel:!1,projectFilesThumbView:{},formData:{thread_title:"",project_id:this.$route.params.project_id,messagebody:""},editorData:"",editorConfig:{toolbarGroups:[{name:"document",groups:["mode","document","doctools"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}],extraPlugins:"font",disableNativeSpellChecker:!1},options:{addRemoveLinks:!0,autoProcessQueue:!1,parallelUploads:1e5,timeout:5e5,maxFilesize:500,uploadMultiple:!0,withCredentials:!0,url:window.api_homeurl+"/thread-message/store"}}},mounted:function(){this.getProjectMessages()},methods:{refreshProjectMessages:function(){this.getProjectMessages()},onSubmit:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=t,a.disableSubmitBtn=!0,a.$v.$touch(),!a.$v.$invalid){s.next=7;break}return a.$store.dispatch("showtostrMessageNotifications",{message:"Please fill all the fields to proceed form!",type:"error"}),a.disableSubmitBtn=!1,s.abrupt("return");case 7:if(!(t.$refs.createPost.dropzone.files.length>0)){s.next=11;break}t.$refs.createPost.processQueue(),s.next=15;break;case 11:return r=a.$store.dispatch("postHttp",{url:"thread-message/store",formDetails:t.formData,formEvent:e.target}),s.next=14,r.then((function(t){"undefined"!==typeof t&&(a.$store.dispatch("displayMessageErrors",{response:t,formEvent:e.target}),a.$router.push({path:"/projects/show/"+a.$route.params.project_id+"/messages/show/"+t.data.thread_id}),a.disableSubmitBtn=!1)}));case 14:a.disableSubmitBtn=!1;case 15:case"end":return s.stop()}}),s)})))()},getProjectMessages:function(){var e=arguments,t=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.length>0&&void 0!==e[0]?e[0]:1,e.length>1&&void 0!==e[1]?e[1]:null,a=t,a.sub_loader=!0,r=a.$store.dispatch("getHttp",{url:"thread-message/get-project-messages-data/"+t.$route.params.project_id+"?&timezone="+Intl.DateTimeFormat().resolvedOptions().timeZone}),s.next=7,r.then((function(e){"undefined"!==typeof e&&(a.project_messages=e.data),a.sub_loader=!1,a.loader=!1}));case 7:case"end":return s.stop()}}),s)})))()},showHideMessageModel:function(){this.showMessageModel?this.showMessageModel=!1:this.showMessageModel=!0},sendingEvent:function(e,t,s){s.append("messagebody",this.formData.messagebody),s.append("thread_title",this.formData.thread_title),s.append("project_id",this.formData.project_id)},successEvent:function(e,t){},multipleUploadComplete:function(e,t){var s=this;s.$store.dispatch("showtostrMessageNotifications",{message:t.message,type:t.status}),s.$router.push({path:"/projects/show/"+s.$route.params.project_id+"/messages/show/"+t.thread_id}),s.disableSubmitBtn=!1},multipleServerError:function(e,t){if(t.error)this.showtostrMessages(t.error,"error");else{this.showtostrMessages(t.message,"error");var s=this;m.a.each(t.errors,(function(e,t){s.displayErrors(e)}))}this.disableSubmitBtn=!1},errorEvent:function(e,t,s){return e.status="queued",e.previewElement.classList.remove("dz-error")},beforeLeave:function(e){this.prevHeight=getComputedStyle(e).height},enter:function(e){var t=getComputedStyle(e),s=t.height;e.style.height=this.prevHeight,setTimeout((function(){e.style.height=s}))},afterEnter:function(e){e.style.height="auto"}}}),x=k,D=(s("21df"),Object(b["a"])(x,w,y,!1,null,"cf7a3192",null)),$=D.exports,E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"project-files-tb"},[s("transition",{attrs:{name:"fade",mode:"out-in"},on:{beforeLeave:e.beforeLeave,enter:e.enter,afterEnter:e.afterEnter}},[e.loader?s("div",{key:"1",staticClass:"white-row loader-route"},[s("div",{staticClass:"lds-sub-ripple"},[s("div"),s("div")])]):s("div",{key:"2",staticClass:"project-messages-wrapper"},[s("section",{staticClass:"messages-heading-top"},[s("div",{staticClass:"top-area"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-8 col-lg-8 col-md-8 col-sm-6"},[s("div",{},[s("h4",{staticClass:"general-sub-heading"},[e._v(" Messages "),s("a",{staticClass:"refreshData",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.refreshProjectMessages(t)}}},[s("i",{staticClass:"fas fa-redo-alt"})])])])]),s("div",{staticClass:"col-xl-4 col-lg-4 col-md-4 col-sm-6"},[s("div",{staticClass:"general-filters form-area text-right"},[s("button",{staticClass:"btn btn-primary default-global-btn",on:{click:e.showHideMessageModel}},[e._v(" Create a New Thread ")])])])])])]),s("section",{staticClass:"upload-file-form-area"},[s("transition",{attrs:{name:"slide"}},[s("form",{directives:[{name:"show",rawName:"v-show",value:e.showMessageModel,expression:"showMessageModel"}],staticClass:"main-thread-message-form",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"thread_title"}},[e._v("Enter Thread Title")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.thread_title,expression:"formData.thread_title"}],staticClass:"form-control",class:{"input-border-errors":e.$v.formData.thread_title.$dirty&&!e.$v.formData.thread_title.required},attrs:{type:"text"},domProps:{value:e.formData.thread_title},on:{input:function(t){t.target.composing||e.$set(e.formData,"thread_title",t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"messagebody"}},[e._v("Enter Thread Body")]),s("ckeditor",{class:{"input-border-errors":e.$v.formData.messagebody.$dirty&&!e.$v.formData.messagebody.required},attrs:{config:e.editorConfig},model:{value:e.formData.messagebody,callback:function(t){e.$set(e.formData,"messagebody",t)},expression:"formData.messagebody"}})],1),s("dropzone",{ref:"createPost",attrs:{id:"foo",options:e.options},on:{"vdropzone-sending":e.sendingEvent,"vdropzone-success":e.successEvent,"vdropzone-error":e.errorEvent,"vdropzone-success-multiple":e.multipleUploadComplete,"vdropzone-error-multiple":e.multipleServerError}}),s("div",{staticClass:"form-actions"},[s("button",{staticClass:"btn btn-primary default-global-btn",attrs:{disabled:e.disableSubmitBtn,type:"submit",id:"save-form"}},[e._v(" Create Message ")]),e.disableSubmitBtn?s("div",{staticClass:"form_submit_loader"},[s("div",{staticClass:"lds-ellipsis"},[s("div"),s("div"),s("div"),s("div")])]):e._e()])],1)])],1),s("section",{staticClass:"thread-listing"},["undefined"!==typeof e.project_messages.data&&Object.keys(e.project_messages.data).length?s("div",{staticClass:"message-thread-wrapper"},[e.sub_loader?s("div",{staticClass:"white-row loader-route subloader"},[s("div",{staticClass:"lds-sub-ripple"},[s("div"),s("div")])]):e._e(),e._l(e.project_messages.data,(function(t,a){return s("div",{key:a,staticClass:"thr-loop-row margin-top-20"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-4 col-lg-4 col-md-12 col-sm-12"},[s("div",{staticClass:"thrd-name"},[s("router-link",{staticClass:"eclipse-para global-para-linkcolor-blk customize-global-link gl-lk-blk",attrs:{to:{path:"/projects/show/"+e.$route.params.project_id+"/messages/show/"+t.id},tag:"a"}},[e._v(" "+e._s(t.porject_thread_subtitle)+" ")])],1)]),s("div",{staticClass:"col-xl-6 col-lg-6 col-md-8 col-sm-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-3 col-lg-3 col-md-3 col-sm-12"},[s("div",{staticClass:"per-name"},[s("p",{staticClass:"eclipse-para"},[e._v(" "+e._s(t.last_message.user.name)+" ")])])]),s("div",{staticClass:"col-xl-9 col-lg-9 col-md-9 col-sm-12"},[s("div",{staticClass:"pers-last-mesg"},[s("p",{staticClass:"eclipse-para"},[e._v(" "+e._s(t.last_message.message)+" ")])])])])]),s("div",{staticClass:"col-xl-2 col-lg-2 col-md-4 col-sm-12"},[s("div",{staticClass:"thr-time text-right"},[e._v(" "+e._s(t.last_message.created_at)+" ")])])])])}))],2):s("div",{staticClass:"message-thread-wrapper"},[s("div",{staticClass:"thr-loop-row margin-top-20"},[s("no-record-found")],1)])])])])],1)},S=[],P=s("b5ae"),z=P.required,B=(P.minLength,P.email,P.numeric,P.url,{mixins:[u["validationMixin"]],components:{Dropzone:c.a,"no-record-found":p["a"]},computed:{},validations:{formData:{thread_title:{required:z},messagebody:{required:z}}},data:function(){return{project_messages:{},sub_loader:!0,loader:!0,threadListing:{},disableSubmitBtn:!1,updateListDataView:!1,refreshThumbData:!1,doc_file_url:"https://pncworkbench.com/img/file_doc.png",excel_file_url:"https://pncworkbench.com/img/excel.png",global_image_url:"https://pncworkbench.com/img/archive.png",psd_url:"https://pncworkbench.com/img/psd.png",roleurl:"https://pncworkbench.com",pre:"",showMessageModel:!1,projectFilesThumbView:{},formData:{thread_title:"",project_id:this.$route.params.project_id,messagebody:""},editorData:"",editorConfig:{toolbarGroups:[{name:"document",groups:["mode","document","doctools"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}],extraPlugins:"font",disableNativeSpellChecker:!1},options:{addRemoveLinks:!0,autoProcessQueue:!1,parallelUploads:1e5,timeout:5e5,maxFilesize:500,uploadMultiple:!0,withCredentials:!0,url:window.api_homeurl+"/thread-message/store"}}},mounted:function(){this.getProjectMessages()},methods:{refreshProjectMessages:function(){this.getProjectMessages()},onSubmit:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=t,a.disableSubmitBtn=!0,a.$v.$touch(),!a.$v.$invalid){s.next=7;break}return a.$store.dispatch("showtostrMessageNotifications",{message:"Please fill all the fields to proceed form!",type:"error"}),a.disableSubmitBtn=!1,s.abrupt("return");case 7:if(!(t.$refs.createPost.dropzone.files.length>0)){s.next=11;break}t.$refs.createPost.processQueue(),s.next=15;break;case 11:return r=a.$store.dispatch("postHttp",{url:"thread-message/store",formDetails:t.formData,formEvent:e.target}),s.next=14,r.then((function(t){"undefined"!==typeof t&&(a.$store.dispatch("displayMessageErrors",{response:t,formEvent:e.target}),a.$router.push({path:"/projects/show/"+a.$route.params.project_id+"/messages/show/"+t.data.thread_id}),a.disableSubmitBtn=!1)}));case 14:a.disableSubmitBtn=!1;case 15:case"end":return s.stop()}}),s)})))()},getProjectMessages:function(){var e=arguments,t=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.length>0&&void 0!==e[0]?e[0]:1,e.length>1&&void 0!==e[1]?e[1]:null,a=t,a.sub_loader=!0,r=a.$store.dispatch("getHttp",{url:"thread-message/get-project-messages-data/"+t.$route.params.project_id+"?&timezone="+Intl.DateTimeFormat().resolvedOptions().timeZone}),s.next=7,r.then((function(e){"undefined"!==typeof e&&(a.project_messages=e.data),a.sub_loader=!1,a.loader=!1}));case 7:case"end":return s.stop()}}),s)})))()},showHideMessageModel:function(){this.showMessageModel?this.showMessageModel=!1:this.showMessageModel=!0},sendingEvent:function(e,t,s){s.append("messagebody",this.formData.messagebody),s.append("thread_title",this.formData.thread_title),s.append("project_id",this.formData.project_id)},successEvent:function(e,t){},multipleUploadComplete:function(e,t){var s=this;s.$store.dispatch("showtostrMessageNotifications",{message:t.message,type:t.status}),s.$router.push({path:"/projects/show/"+s.$route.params.project_id+"/messages/show/"+t.thread_id}),s.disableSubmitBtn=!1},multipleServerError:function(e,t){if(t.error)this.showtostrMessages(t.error,"error");else{this.showtostrMessages(t.message,"error");var s=this;m.a.each(t.errors,(function(e,t){s.displayErrors(e)}))}this.disableSubmitBtn=!1},errorEvent:function(e,t,s){return e.status="queued",e.previewElement.classList.remove("dz-error")},beforeLeave:function(e){this.prevHeight=getComputedStyle(e).height},enter:function(e){var t=getComputedStyle(e),s=t.height;e.style.height=this.prevHeight,setTimeout((function(){e.style.height=s}))},afterEnter:function(e){e.style.height="auto"}}}),L=B,T=(s("77a6"),Object(b["a"])(L,E,S,!1,null,"a351d420",null)),H=T.exports,O=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"project-files-tb"},[s("transition",{attrs:{name:"fade",mode:"out-in"},on:{beforeLeave:e.beforeLeave,enter:e.enter,afterEnter:e.afterEnter}},[e.loader?s("div",{key:"1",staticClass:"white-row loader-route"},[s("div",{staticClass:"lds-sub-ripple"},[s("div"),s("div")])]):s("div",{key:"2",staticClass:"project-messages-wrapper"},[s("section",{staticClass:"messages-heading-top"},[s("div",{staticClass:"top-area"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-8 col-lg-8 col-md-8 col-sm-6"},[s("div",{},[s("h4",{staticClass:"general-sub-heading"},[e._v(" Messages "),s("a",{staticClass:"refreshData",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.refreshProjectMessages(t)}}},[s("i",{staticClass:"fas fa-redo-alt"})])])])]),s("div",{staticClass:"col-xl-4 col-lg-4 col-md-4 col-sm-6"},[s("div",{staticClass:"general-filters form-area text-right"},[s("button",{staticClass:"btn btn-primary default-global-btn",on:{click:e.showHideMessageModel}},[e._v(" Create a New Thread ")])])])])])]),s("section",{staticClass:"upload-file-form-area"},[s("transition",{attrs:{name:"slide"}},[s("form",{directives:[{name:"show",rawName:"v-show",value:e.showMessageModel,expression:"showMessageModel"}],staticClass:"main-thread-message-form",attrs:{enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"thread_title"}},[e._v("Enter Thread Title")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.formData.thread_title,expression:"formData.thread_title"}],staticClass:"form-control",class:{"input-border-errors":e.$v.formData.thread_title.$dirty&&!e.$v.formData.thread_title.required},attrs:{type:"text"},domProps:{value:e.formData.thread_title},on:{input:function(t){t.target.composing||e.$set(e.formData,"thread_title",t.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"messagebody"}},[e._v("Enter Thread Body")]),s("ckeditor",{class:{"input-border-errors":e.$v.formData.messagebody.$dirty&&!e.$v.formData.messagebody.required},attrs:{config:e.editorConfig},model:{value:e.formData.messagebody,callback:function(t){e.$set(e.formData,"messagebody",t)},expression:"formData.messagebody"}})],1),s("dropzone",{ref:"createPost",attrs:{id:"foo",options:e.options},on:{"vdropzone-sending":e.sendingEvent,"vdropzone-success":e.successEvent,"vdropzone-error":e.errorEvent,"vdropzone-success-multiple":e.multipleUploadComplete,"vdropzone-error-multiple":e.multipleServerError}}),s("div",{staticClass:"form-actions"},[s("button",{staticClass:"btn btn-primary default-global-btn",attrs:{disabled:e.disableSubmitBtn,type:"submit",id:"save-form"}},[e._v(" Create Message ")]),e.disableSubmitBtn?s("div",{staticClass:"form_submit_loader"},[s("div",{staticClass:"lds-ellipsis"},[s("div"),s("div"),s("div"),s("div")])]):e._e()])],1)])],1),s("section",{staticClass:"thread-listing"},["undefined"!==typeof e.project_messages.data&&Object.keys(e.project_messages.data).length?s("div",{staticClass:"message-thread-wrapper"},[e.sub_loader?s("div",{staticClass:"white-row loader-route subloader"},[s("div",{staticClass:"lds-sub-ripple"},[s("div"),s("div")])]):e._e(),e._l(e.project_messages.data,(function(t,a){return s("div",{key:a,staticClass:"thr-loop-row margin-top-20"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-4 col-lg-4 col-md-12 col-sm-12"},[s("div",{staticClass:"thrd-name"},[s("router-link",{staticClass:"eclipse-para global-para-link2",attrs:{to:{path:"/projects/show/"+e.$route.params.project_id+"/messages/show/"+t.id},tag:"p"}},[e._v(" "+e._s(t.porject_thread_subtitle)+" ")])],1)]),s("div",{staticClass:"col-xl-6 col-lg-6 col-md-8 col-sm-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-3 col-lg-3 col-md-3 col-sm-12"},[s("div",{staticClass:"per-name"},[s("p",{staticClass:"eclipse-para"},[e._v(" "+e._s(t.last_message.user.name)+" ")])])]),s("div",{staticClass:"col-xl-9 col-lg-9 col-md-9 col-sm-12"},[s("div",{staticClass:"pers-last-mesg"},[s("p",{staticClass:"eclipse-para"},[e._v(" "+e._s(t.last_message.message)+" ")])])])])]),s("div",{staticClass:"col-xl-2 col-lg-2 col-md-4 col-sm-12"},[s("div",{staticClass:"thr-time text-right"},[e._v(" "+e._s(t.last_message.created_at)+" ")])])])])}))],2):s("div",{staticClass:"message-thread-wrapper"},[s("div",{staticClass:"thr-loop-row margin-top-20"},[s("no-record-found")],1)])])])])],1)},R=[],q=s("b5ae"),N=q.required,U=(q.minLength,q.email,q.numeric,q.url,{mixins:[u["validationMixin"]],components:{Dropzone:c.a,"no-record-found":p["a"]},computed:{},validations:{formData:{thread_title:{required:N},messagebody:{required:N}}},data:function(){return{sub_loader:!0,project_messages:{},loader:!0,threadListing:{},disableSubmitBtn:!1,updateListDataView:!1,refreshThumbData:!1,doc_file_url:"https://pncworkbench.com/img/file_doc.png",excel_file_url:"https://pncworkbench.com/img/excel.png",global_image_url:"https://pncworkbench.com/img/archive.png",psd_url:"https://pncworkbench.com/img/psd.png",roleurl:"https://pncworkbench.com",pre:"",showMessageModel:!1,projectFilesThumbView:{},formData:{thread_title:"",project_id:this.$route.params.project_id,messagebody:""},editorData:"",editorConfig:{toolbarGroups:[{name:"document",groups:["mode","document","doctools"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}],extraPlugins:"font",disableNativeSpellChecker:!1},options:{addRemoveLinks:!0,autoProcessQueue:!1,parallelUploads:1e5,timeout:5e5,maxFilesize:500,uploadMultiple:!0,withCredentials:!0,url:window.api_homeurl+"/thread-message/store"}}},mounted:function(){this.getProjectMessages()},methods:{refreshProjectMessages:function(){this.getProjectMessages()},onSubmit:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(a=t,a.disableSubmitBtn=!0,a.$v.$touch(),!a.$v.$invalid){s.next=7;break}return a.$store.dispatch("showtostrMessageNotifications",{message:"Please fill all the fields to proceed form!",type:"error"}),a.disableSubmitBtn=!1,s.abrupt("return");case 7:if(!(t.$refs.createPost.dropzone.files.length>0)){s.next=11;break}t.$refs.createPost.processQueue(),s.next=15;break;case 11:return r=a.$store.dispatch("postHttp",{url:"thread-message/store",formDetails:t.formData,formEvent:e.target}),s.next=14,r.then((function(t){"undefined"!==typeof t&&(a.$store.dispatch("displayMessageErrors",{response:t,formEvent:e.target}),a.$router.push({path:"/projects/show/"+a.$route.params.project_id+"/messages/show/"+t.data.thread_id}),a.disableSubmitBtn=!1)}));case 14:a.disableSubmitBtn=!1;case 15:case"end":return s.stop()}}),s)})))()},getProjectMessages:function(){var e=arguments,t=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.length>0&&void 0!==e[0]?e[0]:1,e.length>1&&void 0!==e[1]?e[1]:null,a=t,a.sub_loader=!0,r=a.$store.dispatch("getHttp",{url:"thread-message/get-project-messages-data/"+t.$route.params.project_id+"?&timezone="+Intl.DateTimeFormat().resolvedOptions().timeZone}),s.next=7,r.then((function(e){"undefined"!==typeof e&&(a.project_messages=e.data),a.sub_loader=!1,a.loader=!1}));case 7:case"end":return s.stop()}}),s)})))()},showHideMessageModel:function(){this.showMessageModel?this.showMessageModel=!1:this.showMessageModel=!0},sendingEvent:function(e,t,s){s.append("messagebody",this.formData.messagebody),s.append("thread_title",this.formData.thread_title),s.append("project_id",this.formData.project_id)},successEvent:function(e,t){},multipleUploadComplete:function(e,t){var s=this;s.$store.dispatch("showtostrMessageNotifications",{message:t.message,type:t.status}),s.$router.push({path:"/projects/show/"+s.$route.params.project_id+"/messages/show/"+t.thread_id}),s.disableSubmitBtn=!1},multipleServerError:function(e,t){if(t.error)this.showtostrMessages(t.error,"error");else{this.showtostrMessages(t.message,"error");var s=this;m.a.each(t.errors,(function(e,t){s.displayErrors(e)}))}this.disableSubmitBtn=!1},errorEvent:function(e,t,s){return e.status="queued",e.previewElement.classList.remove("dz-error")},beforeLeave:function(e){this.prevHeight=getComputedStyle(e).height},enter:function(e){var t=getComputedStyle(e),s=t.height;e.style.height=this.prevHeight,setTimeout((function(){e.style.height=s}))},afterEnter:function(e){e.style.height="auto"}}}),F=U,V=(s("a1ec"),Object(b["a"])(F,O,R,!1,null,"44fe3523",null)),Q=V.exports,A=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"project-files-tb"},[s("transition",{attrs:{name:"fade",mode:"out-in"},on:{beforeLeave:e.beforeLeave,enter:e.enter,afterEnter:e.afterEnter}},[e.loader?s("div",{key:"1",staticClass:"white-row loader-route"},[s("div",{staticClass:"lds-sub-ripple"},[s("div"),s("div")])]):s("div",{key:"2",staticClass:"project-messages-wrapper"},[s("section",{staticClass:"messages-heading-top"},[s("div",{staticClass:"top-area"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-12 col-lg-12 col-md-12 col-sm-6"},[s("div",{},[s("h4",{staticClass:"general-sub-heading"},[e._v(" Messages "),s("a",{staticClass:"refreshData",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.refreshProjectMessages(t)}}},[s("i",{staticClass:"fas fa-redo-alt"})])])])])])])]),s("section",{staticClass:"thread-listing"},["undefined"!==typeof e.project_messages.data&&Object.keys(e.project_messages.data).length?s("div",{staticClass:"message-thread-wrapper"},[e.sub_loader?s("div",{staticClass:"white-row loader-route subloader"},[s("div",{staticClass:"lds-sub-ripple"},[s("div"),s("div")])]):e._e(),e._l(e.project_messages.data,(function(t,a){return s("div",{key:a,staticClass:"thr-loop-row margin-top-20"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-4 col-lg-4 col-md-12 col-sm-12"},[s("div",{staticClass:"thrd-name"},[s("router-link",{staticClass:"eclipse-para global-para-link2",attrs:{to:{path:"/projects/show/"+e.$route.params.project_id+"/messages/show/"+t.id},tag:"p"}},[e._v(" "+e._s(t.porject_thread_subtitle)+" ")])],1)]),s("div",{staticClass:"col-xl-6 col-lg-6 col-md-8 col-sm-12"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-3 col-lg-3 col-md-3 col-sm-12"},[s("div",{staticClass:"per-name"},[s("p",{staticClass:"eclipse-para"},[e._v(" "+e._s(t.last_message.user.name)+" ")])])]),s("div",{staticClass:"col-xl-9 col-lg-9 col-md-9 col-sm-12"},[s("div",{staticClass:"pers-last-mesg"},[s("p",{staticClass:"eclipse-para"},[e._v(" "+e._s(t.last_message.message)+" ")])])])])]),s("div",{staticClass:"col-xl-2 col-lg-2 col-md-4 col-sm-12"},[s("div",{staticClass:"thr-time text-right"},[e._v(" "+e._s(t.last_message.created_at)+" ")])])])])}))],2):s("div",{staticClass:"message-thread-wrapper"},[s("div",{staticClass:"thr-loop-row margin-top-20"},[s("no-record-found")],1)])])])])],1)},I=[],Z={components:{"no-record-found":p["a"]},computed:{},data:function(){return{sub_loader:!0,project_messages:{},loader:!0,threadListing:{},disableSubmitBtn:!1,updateListDataView:!1,refreshThumbData:!1,doc_file_url:"https://pncworkbench.com/img/file_doc.png",excel_file_url:"https://pncworkbench.com/img/excel.png",global_image_url:"https://pncworkbench.com/img/archive.png",psd_url:"https://pncworkbench.com/img/psd.png",roleurl:"https://pncworkbench.com",pre:"",showMessageModel:!1,projectFilesThumbView:{}}},mounted:function(){this.getProjectMessages()},methods:{refreshProjectMessages:function(){this.getProjectMessages()},getProjectMessages:function(){var e=arguments,t=this;return Object(l["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return e.length>0&&void 0!==e[0]?e[0]:1,e.length>1&&void 0!==e[1]?e[1]:null,a=t,a.sub_loader=!0,r=a.$store.dispatch("getHttp",{url:"thread-message/get-project-messages-data/"+t.$route.params.project_id+"?&timezone="+Intl.DateTimeFormat().resolvedOptions().timeZone}),s.next=7,r.then((function(e){"undefined"!==typeof e&&(a.project_messages=e.data),a.sub_loader=!1,a.loader=!1}));case 7:case"end":return s.stop()}}),s)})))()},beforeLeave:function(e){this.prevHeight=getComputedStyle(e).height},enter:function(e){var t=getComputedStyle(e),s=t.height;e.style.height=this.prevHeight,setTimeout((function(){e.style.height=s}))},afterEnter:function(e){e.style.height="auto"}}},G=Z,J=(s("10cf"),Object(b["a"])(G,A,I,!1,null,"70b903be",null)),K=J.exports,W={name:"projects.messages",components:{"adminvue-projects-messages-vue":C,"salesteamleadvue-projects-messages-vue":$,"salespersonvue-projects-messages-vue":H,"clientvue-projects-messages-vue":Q,"default-projects-messages-vue":K},computed:{getActiveUserData:function(){return this.$store.state.auth}}},X=W,Y=Object(b["a"])(X,a,r,!1,null,null,null);t["default"]=Y.exports}}]);
//# sourceMappingURL=projects.messages.074fa7ca.js.map
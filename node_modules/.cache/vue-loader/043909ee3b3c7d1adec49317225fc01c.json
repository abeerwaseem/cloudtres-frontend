{"remainingRequest":"/Users/shafimuhammad/Sites/payments-pncworkbench/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shafimuhammad/Sites/payments-pncworkbench/src/views/all-notifications/index-notification.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shafimuhammad/Sites/payments-pncworkbench/src/views/all-notifications/index-notification.vue","mtime":1609744687395},{"path":"/Users/shafimuhammad/Sites/payments-pncworkbench/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shafimuhammad/Sites/payments-pncworkbench/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shafimuhammad/Sites/payments-pncworkbench/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shafimuhammad/Sites/payments-pncworkbench/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBub3JlY29yZGZvdW5kIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvbm8tcmVjb3JkLWZvdW5kIjsKaW1wb3J0IEF2YXRhciBmcm9tICJ2dWUtYXZhdGFyIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEF2YXRhciwKICAgICJuby1yZWNvcmQtZm91bmQiOiBub3JlY29yZGZvdW5kCiAgfSwKICBjb21wdXRlZDogewogICAgZ2V0QWN0aXZlVXNlckRhdGEoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5hdXRoOwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG5vdGlmaWNhdGlvbl9sb2FkZXI6IHRydWUsCiAgICAgIHRvdGFsX2NvdW50OiAwLAogICAgICB0b3RhbF9ub3RpZmljYXRpb25zOiB7fQogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICBkb2N1bWVudC50aXRsZSA9IHRoaXMuJHJvdXRlci5hcHAuX3JvdXRlLm1ldGEucGFnZVRpdGxlOwogICAgdGhpcy5nZXROb3RpZmljYXRpb25zKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICByZWZyZXNoTm90aWZpY2F0aW9uVGFibGUoKSB7CiAgICAgIHRoaXMuZ2V0Tm90aWZpY2F0aW9ucygpOwogICAgfSwKICAgIGFzeW5jIGdldE5vdGlmaWNhdGlvbnMocGFnZSA9IDEsIGFjdGlvbiA9IG51bGwpIHsKICAgICAgY29uc3QgJHRoaXMgPSB0aGlzOwogICAgICAkdGhpcy5ub3RpZmljYXRpb25fbG9hZGVyID0gdHJ1ZTsKICAgICAgY29uc3QgZGF0YSA9ICR0aGlzLiRzdG9yZS5kaXNwYXRjaCgiZ2V0SHR0cCIsIHsKICAgICAgICB1cmw6CiAgICAgICAgICAibm90aWZpY2F0aW9ucy9nZXQtdG90YWwtbm90aWZpY2F0aW9uLXBhZ2luYXRpb24/dGltZXpvbmU9IiArCiAgICAgICAgICBJbnRsLkRhdGVUaW1lRm9ybWF0KCkucmVzb2x2ZWRPcHRpb25zKCkudGltZVpvbmUgKwogICAgICAgICAgIiZwYWdlPSIgKwogICAgICAgICAgcGFnZQogICAgICB9KTsKICAgICAgYXdhaXQgZGF0YS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHR5cGVvZiByZXNwb25zZSAhPSAidW5kZWZpbmVkIikgewogICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgJHRoaXMudG90YWxfbm90aWZpY2F0aW9ucyA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgICAkdGhpcy5ub3RpZmljYXRpb25fbG9hZGVyID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBtYXJrQXNSZWFkKGlkLCByZWRpcmVjdCwgcmVhZF9hdCkgewogICAgICBjb25zdCAkdGhpcyA9IHRoaXM7CiAgICAgICR0aGlzLm5vdGlmaWNhdGlvbl9sb2FkZXIgPSB0cnVlOwogICAgICBpZiAocmVhZF9hdCA9PT0gbnVsbCkgewogICAgICAgIGNvbnN0IGRhdGEgPSAkdGhpcy4kc3RvcmUuZGlzcGF0Y2goInBvc3RIdHRwIiwgewogICAgICAgICAgdXJsOiAibm90aWZpY2F0aW9ucy9tYXJrLWFzLXJlYWQvIiArIGlkLAogICAgICAgICAgZm9ybURldGFpbHM6IHsKICAgICAgICAgICAgaWQ6IGlkCiAgICAgICAgICB9LAogICAgICAgICAgZm9ybUV2ZW50OiBudWxsCiAgICAgICAgfSk7CiAgICAgICAgYXdhaXQgZGF0YS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlICE9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgICAkdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldGluZ1RvdGFsQ291bnRPZk5vdGlmaWNhdGlvbiIpOwogICAgICAgICAgICAkdGhpcy5nZXROb3RpZmljYXRpb25zKCk7CiAgICAgICAgICAgIGlmIChyZWRpcmVjdC5wb3B1cCkgewogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJoZXkiKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBpZiAoJHRoaXMuJHJvdXRlLmZ1bGxQYXRoID09IHJlZGlyZWN0LnVybCkgewogICAgICAgICAgICAgICAgJHRoaXMuJHJvdXRlci5wdXNoKHJlZGlyZWN0LnVybCArICI/cmVsb2FkPTEiKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJHRoaXMuJHJvdXRlci5wdXNoKHJlZGlyZWN0LnVybCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICR0aGlzLm5vdGlmaWNhdGlvbl9sb2FkZXIgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRpbmdUb3RhbENvdW50T2ZOb3RpZmljYXRpb24iKTsKICAgICAgICAkdGhpcy5nZXROb3RpZmljYXRpb25zKCk7CiAgICAgICAgaWYgKHJlZGlyZWN0LnBvcHVwKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygiaGV5Iik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICgkdGhpcy4kcm91dGUuZnVsbFBhdGggPT0gcmVkaXJlY3QudXJsKSB7CiAgICAgICAgICAgICR0aGlzLiRyb3V0ZXIucHVzaChyZWRpcmVjdC51cmwgKyAiP3JlbG9hZD0xIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAkdGhpcy4kcm91dGVyLnB1c2gocmVkaXJlY3QudXJsKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgJHRoaXMubm90aWZpY2F0aW9uX2xvYWRlciA9IHRydWU7CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["index-notification.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index-notification.vue","sourceRoot":"src/views/all-notifications","sourcesContent":["<template>\n  <div class=\"viewDashBoard\" v-cloak>\n    <div class=\"container\">\n      <div class=\"white-row\">\n        <h2 class=\"global-style-heading\">\n          Notifications\n          <a\n            @click.prevent=\"refreshNotificationTable\"\n            href=\"\"\n            class=\"refreshData\"\n            ><i class=\"fas fa-redo-alt\"></i\n          ></a>\n        </h2>\n        <div\n          v-if=\"\n            typeof getActiveUserData.user !== 'undefined' &&\n              Object.keys(getActiveUserData.user).length\n          \"\n        >\n          <div class=\"nofication-body not-len\">\n            <div\n              v-if=\"notification_loader\"\n              class=\"white-row loader-route notification-loader\"\n            >\n              <div class=\"lds-sub-ripple\">\n                <div></div>\n                <div></div>\n              </div>\n            </div>\n            <div\n              class=\"wrapper-notifications\"\n              v-if=\"\n                typeof total_notifications.data !== 'undefined' &&\n                  Object.keys(total_notifications.data).length\n              \"\n            >\n              <div class=\"not-groups\">\n                <div class=\"notifications-listing\">\n                  <ul class=\"list-group list-group-flush\">\n                    <li\n                      class=\"list-group-item\"\n                      :class=\"{ active: !not.read_at }\"\n                      v-for=\"(not, not_index) in total_notifications.data\"\n                      :key=\"not_index\"\n                    >\n                      <div\n                        class=\"media\"\n                        @click=\"\n                          markAsRead(not.id, not.data.redirect, not.read_at)\n                        \"\n                      >\n                        <avatar\n                          class=\"mr-3\"\n                          :username=\"not.data.body.name\"\n                        ></avatar>\n                        <div class=\"media-body\">\n                          <h6>{{ not.data.body.title }}</h6>\n                          <p>{{ not.data.body.message }}</p>\n                          <p>{{ not.created_at }}</p>\n                        </div>\n                      </div>\n                    </li>\n                  </ul>\n                </div>\n                <div class=\"row\">\n                  <div class=\"col-sm-12\">\n                    <pagination\n                      class=\"pagination justify-content-center\"\n                      :data=\"total_notifications\"\n                      :limit=\"1\"\n                      @pagination-change-page=\"getNotifications\"\n                    ></pagination>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div v-else class=\"wrapper-notifications\">\n              <no-record-found></no-record-found>\n            </div>\n          </div>\n        </div>\n        <div v-else class=\"white-row loader-route\">\n          <div class=\"lds-sub-ripple\">\n            <div></div>\n            <div></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport norecordfound from \"../../components/no-record-found\";\nimport Avatar from \"vue-avatar\";\nexport default {\n  components: {\n    Avatar,\n    \"no-record-found\": norecordfound\n  },\n  computed: {\n    getActiveUserData() {\n      return this.$store.state.auth;\n    }\n  },\n  data() {\n    return {\n      notification_loader: true,\n      total_count: 0,\n      total_notifications: {}\n    };\n  },\n  mounted() {\n    document.title = this.$router.app._route.meta.pageTitle;\n    this.getNotifications();\n  },\n  methods: {\n    refreshNotificationTable() {\n      this.getNotifications();\n    },\n    async getNotifications(page = 1, action = null) {\n      const $this = this;\n      $this.notification_loader = true;\n      const data = $this.$store.dispatch(\"getHttp\", {\n        url:\n          \"notifications/get-total-notification-pagination?timezone=\" +\n          Intl.DateTimeFormat().resolvedOptions().timeZone +\n          \"&page=\" +\n          page\n      });\n      await data.then(function(response) {\n        if (typeof response != \"undefined\") {\n          console.log(response);\n          $this.total_notifications = response.data;\n          $this.notification_loader = false;\n        }\n      });\n    },\n    async markAsRead(id, redirect, read_at) {\n      const $this = this;\n      $this.notification_loader = true;\n      if (read_at === null) {\n        const data = $this.$store.dispatch(\"postHttp\", {\n          url: \"notifications/mark-as-read/\" + id,\n          formDetails: {\n            id: id\n          },\n          formEvent: null\n        });\n        await data.then(function(response) {\n          if (typeof response !== \"undefined\") {\n            $this.$store.dispatch(\"getingTotalCountOfNotification\");\n            $this.getNotifications();\n            if (redirect.popup) {\n              // console.log(\"hey\");\n            } else {\n              if ($this.$route.fullPath == redirect.url) {\n                $this.$router.push(redirect.url + \"?reload=1\");\n              } else {\n                $this.$router.push(redirect.url);\n              }\n              $this.notification_loader = true;\n            }\n          }\n        });\n      } else {\n        $this.$store.dispatch(\"getingTotalCountOfNotification\");\n        $this.getNotifications();\n        if (redirect.popup) {\n          // console.log(\"hey\");\n        } else {\n          if ($this.$route.fullPath == redirect.url) {\n            $this.$router.push(redirect.url + \"?reload=1\");\n          } else {\n            $this.$router.push(redirect.url);\n          }\n        }\n        $this.notification_loader = true;\n      }\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.btn:not(:disabled):not(.disabled) {\n  cursor: pointer;\n  box-shadow: none;\n}\n.no-notifications-found {\n  text-align: center;\n  padding: 64px 0;\n  font-size: 22px;\n}\n.wrapper-notifications {\n  position: relative;\n  min-height: 150px;\n  .white-row.loader-route.notification-loader {\n    top: 0;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    z-index: 9;\n    .lds-sub-ripple {\n      display: block;\n      position: relative;\n      width: 80px;\n      height: 80px;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n  }\n}\n.nofication-body.not-len {\n  position: relative;\n  .white-row.loader-route.notification-loader {\n    position: absolute;\n    width: 96%;\n    top: 0;\n    height: 100%;\n    z-index: 9;\n    .lds-sub-ripple {\n      display: block;\n      position: relative;\n      width: 80px;\n      height: 80px;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n  }\n}\nbody .nofication-body.not-len {\n  padding: 15px 0;\n  .mark-as-read.text-right {\n    padding: 0 15px;\n  }\n}\nbody .nofication-body .not-groups .notifications-listing h5.date-heading {\n  padding: 0 15px;\n}\nbody\n  .nofication-body\n  .not-groups\n  .notifications-listing\n  .list-group-flush\n  li.list-group-item {\n  padding: 12px 58px;\n  cursor: pointer;\n  &.active {\n    z-index: 2;\n    color: #212529;\n    background-color: #f8f8f8;\n    border-color: #40af2a;\n  }\n}\nbody .mr-3 {\n  left: 10px;\n  top: 18px;\n}\n.media-body p {\n  margin-bottom: 0;\n}\nul.pagination.pagination.justify-content-center {\n  padding: 40px 0 0;\n}\nh2.global-style-heading {\n  padding-bottom: 20px;\n}\n</style>\n"]}]}
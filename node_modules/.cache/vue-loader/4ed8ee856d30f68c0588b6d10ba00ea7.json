{"remainingRequest":"/Users/abeerwaseem/Sites/cloudtres-front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/abeerwaseem/Sites/cloudtres-front/src/components/notification.vue?vue&type=style&index=0&id=5da9fa24&lang=scss&scoped=true&","dependencies":[{"path":"/Users/abeerwaseem/Sites/cloudtres-front/src/components/notification.vue","mtime":1618485350098},{"path":"/Users/abeerwaseem/Sites/cloudtres-front/node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/abeerwaseem/Sites/cloudtres-front/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/abeerwaseem/Sites/cloudtres-front/node_modules/@vue/cli-service/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/abeerwaseem/Sites/cloudtres-front/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/abeerwaseem/Sites/cloudtres-front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/abeerwaseem/Sites/cloudtres-front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmJ0bjpub3QoOmRpc2FibGVkKTpub3QoLmRpc2FibGVkKSB7CiAgY3Vyc29yOiBwb2ludGVyOwogIGJveC1zaGFkb3c6IG5vbmU7Cn0KLm5vLW5vdGlmaWNhdGlvbnMtZm91bmQgewogIHRleHQtYWxpZ246IGNlbnRlcjsKICBwYWRkaW5nOiAxMXB4IDA7CiAgZm9udC1zaXplOiAyMnB4Owp9Ci53cmFwcGVyLW5vdGlmaWNhdGlvbnMgewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICBtaW4taGVpZ2h0OiAxNTBweDsKICAud2hpdGUtcm93LmxvYWRlci1yb3V0ZS5ub3RpZmljYXRpb24tbG9hZGVyIHsKICAgIHRvcDogMDsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGhlaWdodDogMTAwJTsKICAgIHdpZHRoOiAxMDAlOwogICAgei1pbmRleDogOTsKICAgIC5sZHMtc3ViLXJpcHBsZSB7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgIHdpZHRoOiA4MHB4OwogICAgICBoZWlnaHQ6IDgwcHg7CiAgICAgIHRvcDogNTAlOwogICAgICBsZWZ0OiA1MCU7CiAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpOwogICAgfQogIH0KfQoubm9maWNhdGlvbi1ib2R5Lm5vdC1sZW4gewogIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAud2hpdGUtcm93LmxvYWRlci1yb3V0ZS5ub3RpZmljYXRpb24tbG9hZGVyIHsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIHdpZHRoOiA5NiU7CiAgICB0b3A6IDA7CiAgICBoZWlnaHQ6IDEwMCU7CiAgICB6LWluZGV4OiA5OwogICAgLmxkcy1zdWItcmlwcGxlIHsKICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsKICAgICAgd2lkdGg6IDgwcHg7CiAgICAgIGhlaWdodDogODBweDsKICAgICAgdG9wOiA1MCU7CiAgICAgIGxlZnQ6IDUwJTsKICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwgLTUwJSk7CiAgICB9CiAgfQp9CmJvZHkgaGVhZGVyIC50b3AtcmlnaHQgLmRyb3Bkb3duIC5ub2ZpY2F0aW9uLWJvZHkubm90LWxlbiB7CiAgcGFkZGluZzogMTVweCAwOwogIC5tYXJrLWFzLXJlYWQudGV4dC1yaWdodCB7CiAgICBwYWRkaW5nOiAwIDE1cHg7CiAgfQp9CmJvZHkKICBoZWFkZXIKICAudG9wLXJpZ2h0CiAgLmRyb3Bkb3duCiAgLm5vZmljYXRpb24tYm9keQogIC5ub3QtZ3JvdXBzCiAgLm5vdGlmaWNhdGlvbnMtbGlzdGluZwogIGg1LmRhdGUtaGVhZGluZyB7CiAgcGFkZGluZzogMCAxNXB4Owp9CmJvZHkKICBoZWFkZXIKICAudG9wLXJpZ2h0CiAgLmRyb3Bkb3duCiAgLm5vZmljYXRpb24tYm9keQogIC5ub3QtZ3JvdXBzCiAgLm5vdGlmaWNhdGlvbnMtbGlzdGluZwogIC5saXN0LWdyb3VwLWZsdXNoCiAgbGkubGlzdC1ncm91cC1pdGVtIHsKICBwYWRkaW5nOiAxMnB4IDE1cHg7CiAgJi5hY3RpdmUgewogICAgei1pbmRleDogMjsKICAgIGNvbG9yOiAjZmZmOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4ZjhmODsKICAgIGJvcmRlci1jb2xvcjogIzQwYWYyYTsKICB9Cn0K"},{"version":3,"sources":["notification.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"notification.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"dropdown notification-dropdown\">\n    <dropdown :align=\"'left'\" :y=\"50\" :x=\"50\" :before-open=\"callback\">\n      <template slot=\"icon\">\n        <button class=\"btn btn-secondary\" type=\"button\">\n          <i class=\"fas fa-bell\"></i>\n          <span class=\"badge\">{{ getNotificationCount }}</span>\n        </button>\n      </template>\n      <template slot=\"body\">\n        <div class=\"nofication-body not-len\">\n          <div\n            v-if=\"notification_loader\"\n            class=\"white-row loader-route notification-loader\"\n          >\n            <div class=\"lds-sub-ripple\">\n              <div></div>\n              <div></div>\n            </div>\n          </div>\n          <div\n            class=\"wrapper-notifications\"\n            v-if=\"\n              typeof total_notifications.data !== 'undefined' &&\n                Object.keys(total_notifications.data).length\n            \"\n          >\n            <div class=\"mark-as-read text-right\">\n              <span\n                ><a @click.prevent=\"markAllAsRead\" href=\"\"\n                  >Mark all as read</a\n                ></span\n              >\n            </div>\n            <div class=\"not-groups\">\n              <div\n                class=\"notifications-listing\"\n                v-for=\"(notf, nof_index) in total_notifications.data\"\n                :key=\"nof_index\"\n              >\n                <h5 class=\"date-heading\">{{ nof_index }}</h5>\n                <ul class=\"list-group list-group-flush\">\n                  <li\n                    class=\"list-group-item\"\n                    :class=\"{ active: !not.read_at }\"\n                    v-for=\"(not, not_index) in notf\"\n                    :key=\"not_index\"\n                  >\n                    <div\n                      class=\"media\"\n                      @click=\"\n                        markAsRead(not.id, not.data.redirect, not.read_at)\n                      \"\n                    >\n                      <avatar\n                        class=\"mr-3\"\n                        :username=\"not.data.body.name\"\n                      ></avatar>\n                      <div class=\"media-body\">\n                        <h6>{{ not.data.body.title }}</h6>\n                        <p>{{ not.data.body.message }}</p>\n                      </div>\n                    </div>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n          <div v-else class=\"wrapper-notifications\">\n            <div class=\"no-notifications-found\">\n              <no-record-found></no-record-found>\n            </div>\n          </div>\n        </div>\n      </template>\n    </dropdown>\n  </div>\n</template>\n\n<script>\nimport Avatar from \"vue-avatar\";\nimport Dropdown from \"bp-vuejs-dropdown\";\nimport norecordfound from \"../components/no-record-found\";\nexport default {\n  name: \"notifications\",\n  components: {\n    Avatar,\n    Dropdown,\n    \"no-record-found\": norecordfound\n  },\n  data() {\n    return {\n      notification_loader: true,\n      total_count: 0,\n      total_notifications: {}\n    };\n  },\n  mounted() {\n    document.title =\n      \"Cloudtres - \" + this.$router.app._route.meta.pageTitle;\n    //this.$store.dispatch(\"getingTotalCountOfNotification\");\n  },\n  computed: {\n    getNotificationCount() {\n      return this.$store.state.totalNotificationCount;\n    }\n  },\n  methods: {\n    async markAllAsRead() {\n      const $this = this;\n      $this.notification_loader = true;\n      const data = $this.$store.dispatch(\"postHttp\", {\n        url: \"notifications/mark-all-as-read\",\n        formDetails: null,\n        formEvent: null\n      });\n      await data.then(function(response) {\n        if (typeof response !== \"undefined\") {\n          $this.getNotifications();\n        }\n      });\n    },\n    async getNotifications() {\n      this.$store.dispatch(\"getingTotalCountOfNotification\");\n      const $this = this;\n      const data = $this.$store.dispatch(\"getHttp\", {\n        url:\n          \"notifications/total-notification?timezone=\" +\n          Intl.DateTimeFormat().resolvedOptions().timeZone\n      });\n      await data.then(function(response) {\n        if (typeof response != \"undefined\") {\n          $this.total_notifications = response;\n          $this.notification_loader = false;\n        }\n      });\n    },\n    async callback(resolve) {\n      this.notification_loader = true;\n      resolve();\n      await this.getNotifications();\n    },\n    async markAsRead(id, redirect, read_at) {\n      const $this = this;\n      $this.notification_loader = true;\n      if (read_at === null) {\n        const data = $this.$store.dispatch(\"postHttp\", {\n          url: \"notifications/mark-as-read/\" + id,\n          formDetails: {\n            id: id\n          },\n          formEvent: null\n        });\n        await data.then(function(response) {\n          if (typeof response !== \"undefined\") {\n            $this.getNotifications();\n            if (redirect.popup) {\n              // console.log(\"hey\");\n            } else {\n              if ($this.$route.fullPath == redirect.url) {\n                $this.$router.push(redirect.url + \"?reload=1\");\n              } else {\n                $this.$router.push(redirect.url);\n              }\n              $this.notification_loader = true;\n            }\n          }\n        });\n      } else {\n        $this.getNotifications();\n        if (redirect.popup) {\n          // console.log(\"hey\");\n        } else {\n          if ($this.$route.fullPath == redirect.url) {\n            $this.$router.push(redirect.url + \"?reload=1\");\n          } else {\n            $this.$router.push(redirect.url);\n          }\n        }\n        $this.notification_loader = true;\n      }\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.btn:not(:disabled):not(.disabled) {\n  cursor: pointer;\n  box-shadow: none;\n}\n.no-notifications-found {\n  text-align: center;\n  padding: 11px 0;\n  font-size: 22px;\n}\n.wrapper-notifications {\n  position: relative;\n  min-height: 150px;\n  .white-row.loader-route.notification-loader {\n    top: 0;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    z-index: 9;\n    .lds-sub-ripple {\n      display: block;\n      position: relative;\n      width: 80px;\n      height: 80px;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n  }\n}\n.nofication-body.not-len {\n  position: relative;\n  .white-row.loader-route.notification-loader {\n    position: absolute;\n    width: 96%;\n    top: 0;\n    height: 100%;\n    z-index: 9;\n    .lds-sub-ripple {\n      display: block;\n      position: relative;\n      width: 80px;\n      height: 80px;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n  }\n}\nbody header .top-right .dropdown .nofication-body.not-len {\n  padding: 15px 0;\n  .mark-as-read.text-right {\n    padding: 0 15px;\n  }\n}\nbody\n  header\n  .top-right\n  .dropdown\n  .nofication-body\n  .not-groups\n  .notifications-listing\n  h5.date-heading {\n  padding: 0 15px;\n}\nbody\n  header\n  .top-right\n  .dropdown\n  .nofication-body\n  .not-groups\n  .notifications-listing\n  .list-group-flush\n  li.list-group-item {\n  padding: 12px 15px;\n  &.active {\n    z-index: 2;\n    color: #fff;\n    background-color: #f8f8f8;\n    border-color: #40af2a;\n  }\n}\n</style>\n"]}]}
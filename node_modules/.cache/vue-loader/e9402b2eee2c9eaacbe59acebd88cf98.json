{"remainingRequest":"/Users/shafimuhammad/Sites/billig.testingsanctum/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shafimuhammad/Sites/billig.testingsanctum/src/components/notification.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/shafimuhammad/Sites/billig.testingsanctum/src/components/notification.vue","mtime":1609744687392},{"path":"/Users/shafimuhammad/Sites/billig.testingsanctum/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shafimuhammad/Sites/billig.testingsanctum/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shafimuhammad/Sites/billig.testingsanctum/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/shafimuhammad/Sites/billig.testingsanctum/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/shafimuhammad/Sites/billig.testingsanctum/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBBdmF0YXIgZnJvbSAidnVlLWF2YXRhciI7CmltcG9ydCBEcm9wZG93biBmcm9tICJicC12dWVqcy1kcm9wZG93biI7CmltcG9ydCBub3JlY29yZGZvdW5kIGZyb20gIi4uL2NvbXBvbmVudHMvbm8tcmVjb3JkLWZvdW5kIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJub3RpZmljYXRpb25zIiwKICBjb21wb25lbnRzOiB7CiAgICBBdmF0YXIsCiAgICBEcm9wZG93biwKICAgICJuby1yZWNvcmQtZm91bmQiOiBub3JlY29yZGZvdW5kCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbm90aWZpY2F0aW9uX2xvYWRlcjogdHJ1ZSwKICAgICAgdG90YWxfY291bnQ6IDAsCiAgICAgIHRvdGFsX25vdGlmaWNhdGlvbnM6IHt9CiAgICB9OwogIH0sCiAgbW91bnRlZCgpIHsKICAgIGRvY3VtZW50LnRpdGxlID0KICAgICAgIlBOQyBXb3JrIEJlbmNoIC0gIiArIHRoaXMuJHJvdXRlci5hcHAuX3JvdXRlLm1ldGEucGFnZVRpdGxlOwogICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldGluZ1RvdGFsQ291bnRPZk5vdGlmaWNhdGlvbiIpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGdldE5vdGlmaWNhdGlvbkNvdW50KCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudG90YWxOb3RpZmljYXRpb25Db3VudDsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIG1hcmtBbGxBc1JlYWQoKSB7CiAgICAgIGNvbnN0ICR0aGlzID0gdGhpczsKICAgICAgJHRoaXMubm90aWZpY2F0aW9uX2xvYWRlciA9IHRydWU7CiAgICAgIGNvbnN0IGRhdGEgPSAkdGhpcy4kc3RvcmUuZGlzcGF0Y2goInBvc3RIdHRwIiwgewogICAgICAgIHVybDogIm5vdGlmaWNhdGlvbnMvbWFyay1hbGwtYXMtcmVhZCIsCiAgICAgICAgZm9ybURldGFpbHM6IG51bGwsCiAgICAgICAgZm9ybUV2ZW50OiBudWxsCiAgICAgIH0pOwogICAgICBhd2FpdCBkYXRhLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlICE9PSAidW5kZWZpbmVkIikgewogICAgICAgICAgJHRoaXMuZ2V0Tm90aWZpY2F0aW9ucygpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgZ2V0Tm90aWZpY2F0aW9ucygpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldGluZ1RvdGFsQ291bnRPZk5vdGlmaWNhdGlvbiIpOwogICAgICBjb25zdCAkdGhpcyA9IHRoaXM7CiAgICAgIGNvbnN0IGRhdGEgPSAkdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldEh0dHAiLCB7CiAgICAgICAgdXJsOgogICAgICAgICAgIm5vdGlmaWNhdGlvbnMvdG90YWwtbm90aWZpY2F0aW9uP3RpbWV6b25lPSIgKwogICAgICAgICAgSW50bC5EYXRlVGltZUZvcm1hdCgpLnJlc29sdmVkT3B0aW9ucygpLnRpbWVab25lCiAgICAgIH0pOwogICAgICBhd2FpdCBkYXRhLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICBpZiAodHlwZW9mIHJlc3BvbnNlICE9ICJ1bmRlZmluZWQiKSB7CiAgICAgICAgICAkdGhpcy50b3RhbF9ub3RpZmljYXRpb25zID0gcmVzcG9uc2U7CiAgICAgICAgICAkdGhpcy5ub3RpZmljYXRpb25fbG9hZGVyID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBjYWxsYmFjayhyZXNvbHZlKSB7CiAgICAgIHRoaXMubm90aWZpY2F0aW9uX2xvYWRlciA9IHRydWU7CiAgICAgIHJlc29sdmUoKTsKICAgICAgYXdhaXQgdGhpcy5nZXROb3RpZmljYXRpb25zKCk7CiAgICB9LAogICAgYXN5bmMgbWFya0FzUmVhZChpZCwgcmVkaXJlY3QsIHJlYWRfYXQpIHsKICAgICAgY29uc3QgJHRoaXMgPSB0aGlzOwogICAgICAkdGhpcy5ub3RpZmljYXRpb25fbG9hZGVyID0gdHJ1ZTsKICAgICAgaWYgKHJlYWRfYXQgPT09IG51bGwpIHsKICAgICAgICBjb25zdCBkYXRhID0gJHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJwb3N0SHR0cCIsIHsKICAgICAgICAgIHVybDogIm5vdGlmaWNhdGlvbnMvbWFyay1hcy1yZWFkLyIgKyBpZCwKICAgICAgICAgIGZvcm1EZXRhaWxzOiB7CiAgICAgICAgICAgIGlkOiBpZAogICAgICAgICAgfSwKICAgICAgICAgIGZvcm1FdmVudDogbnVsbAogICAgICAgIH0pOwogICAgICAgIGF3YWl0IGRhdGEudGhlbihmdW5jdGlvbihyZXNwb25zZSkgewogICAgICAgICAgaWYgKHR5cGVvZiByZXNwb25zZSAhPT0gInVuZGVmaW5lZCIpIHsKICAgICAgICAgICAgJHRoaXMuZ2V0Tm90aWZpY2F0aW9ucygpOwogICAgICAgICAgICBpZiAocmVkaXJlY3QucG9wdXApIHsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiaGV5Iik7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKCR0aGlzLiRyb3V0ZS5mdWxsUGF0aCA9PSByZWRpcmVjdC51cmwpIHsKICAgICAgICAgICAgICAgICR0aGlzLiRyb3V0ZXIucHVzaChyZWRpcmVjdC51cmwgKyAiP3JlbG9hZD0xIik7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICR0aGlzLiRyb3V0ZXIucHVzaChyZWRpcmVjdC51cmwpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAkdGhpcy5ub3RpZmljYXRpb25fbG9hZGVyID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgICR0aGlzLmdldE5vdGlmaWNhdGlvbnMoKTsKICAgICAgICBpZiAocmVkaXJlY3QucG9wdXApIHsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCJoZXkiKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWYgKCR0aGlzLiRyb3V0ZS5mdWxsUGF0aCA9PSByZWRpcmVjdC51cmwpIHsKICAgICAgICAgICAgJHRoaXMuJHJvdXRlci5wdXNoKHJlZGlyZWN0LnVybCArICI/cmVsb2FkPTEiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICR0aGlzLiRyb3V0ZXIucHVzaChyZWRpcmVjdC51cmwpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAkdGhpcy5ub3RpZmljYXRpb25fbG9hZGVyID0gdHJ1ZTsKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["notification.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"notification.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"dropdown notification-dropdown\">\n    <dropdown :align=\"'left'\" :y=\"50\" :x=\"50\" :before-open=\"callback\">\n      <template slot=\"icon\">\n        <button class=\"btn btn-secondary\" type=\"button\">\n          <i class=\"fas fa-bell\"></i>\n          <span class=\"badge\">{{ getNotificationCount }}</span>\n        </button>\n      </template>\n      <template slot=\"body\">\n        <div class=\"nofication-body not-len\">\n          <div\n            v-if=\"notification_loader\"\n            class=\"white-row loader-route notification-loader\"\n          >\n            <div class=\"lds-sub-ripple\">\n              <div></div>\n              <div></div>\n            </div>\n          </div>\n          <div\n            class=\"wrapper-notifications\"\n            v-if=\"\n              typeof total_notifications.data !== 'undefined' &&\n                Object.keys(total_notifications.data).length\n            \"\n          >\n            <div class=\"mark-as-read text-right\">\n              <span\n                ><a @click.prevent=\"markAllAsRead\" href=\"\"\n                  >Mark all as read</a\n                ></span\n              >\n            </div>\n            <div class=\"not-groups\">\n              <div\n                class=\"notifications-listing\"\n                v-for=\"(notf, nof_index) in total_notifications.data\"\n                :key=\"nof_index\"\n              >\n                <h5 class=\"date-heading\">{{ nof_index }}</h5>\n                <ul class=\"list-group list-group-flush\">\n                  <li\n                    class=\"list-group-item\"\n                    :class=\"{ active: !not.read_at }\"\n                    v-for=\"(not, not_index) in notf\"\n                    :key=\"not_index\"\n                  >\n                    <div\n                      class=\"media\"\n                      @click=\"\n                        markAsRead(not.id, not.data.redirect, not.read_at)\n                      \"\n                    >\n                      <avatar\n                        class=\"mr-3\"\n                        :username=\"not.data.body.name\"\n                      ></avatar>\n                      <div class=\"media-body\">\n                        <h6>{{ not.data.body.title }}</h6>\n                        <p>{{ not.data.body.message }}</p>\n                      </div>\n                    </div>\n                  </li>\n                </ul>\n              </div>\n            </div>\n          </div>\n          <div v-else class=\"wrapper-notifications\">\n            <div class=\"no-notifications-found\">\n              <no-record-found></no-record-found>\n            </div>\n          </div>\n        </div>\n      </template>\n    </dropdown>\n  </div>\n</template>\n\n<script>\nimport Avatar from \"vue-avatar\";\nimport Dropdown from \"bp-vuejs-dropdown\";\nimport norecordfound from \"../components/no-record-found\";\nexport default {\n  name: \"notifications\",\n  components: {\n    Avatar,\n    Dropdown,\n    \"no-record-found\": norecordfound\n  },\n  data() {\n    return {\n      notification_loader: true,\n      total_count: 0,\n      total_notifications: {}\n    };\n  },\n  mounted() {\n    document.title =\n      \"PNC Work Bench - \" + this.$router.app._route.meta.pageTitle;\n    this.$store.dispatch(\"getingTotalCountOfNotification\");\n  },\n  computed: {\n    getNotificationCount() {\n      return this.$store.state.totalNotificationCount;\n    }\n  },\n  methods: {\n    async markAllAsRead() {\n      const $this = this;\n      $this.notification_loader = true;\n      const data = $this.$store.dispatch(\"postHttp\", {\n        url: \"notifications/mark-all-as-read\",\n        formDetails: null,\n        formEvent: null\n      });\n      await data.then(function(response) {\n        if (typeof response !== \"undefined\") {\n          $this.getNotifications();\n        }\n      });\n    },\n    async getNotifications() {\n      this.$store.dispatch(\"getingTotalCountOfNotification\");\n      const $this = this;\n      const data = $this.$store.dispatch(\"getHttp\", {\n        url:\n          \"notifications/total-notification?timezone=\" +\n          Intl.DateTimeFormat().resolvedOptions().timeZone\n      });\n      await data.then(function(response) {\n        if (typeof response != \"undefined\") {\n          $this.total_notifications = response;\n          $this.notification_loader = false;\n        }\n      });\n    },\n    async callback(resolve) {\n      this.notification_loader = true;\n      resolve();\n      await this.getNotifications();\n    },\n    async markAsRead(id, redirect, read_at) {\n      const $this = this;\n      $this.notification_loader = true;\n      if (read_at === null) {\n        const data = $this.$store.dispatch(\"postHttp\", {\n          url: \"notifications/mark-as-read/\" + id,\n          formDetails: {\n            id: id\n          },\n          formEvent: null\n        });\n        await data.then(function(response) {\n          if (typeof response !== \"undefined\") {\n            $this.getNotifications();\n            if (redirect.popup) {\n              // console.log(\"hey\");\n            } else {\n              if ($this.$route.fullPath == redirect.url) {\n                $this.$router.push(redirect.url + \"?reload=1\");\n              } else {\n                $this.$router.push(redirect.url);\n              }\n              $this.notification_loader = true;\n            }\n          }\n        });\n      } else {\n        $this.getNotifications();\n        if (redirect.popup) {\n          // console.log(\"hey\");\n        } else {\n          if ($this.$route.fullPath == redirect.url) {\n            $this.$router.push(redirect.url + \"?reload=1\");\n          } else {\n            $this.$router.push(redirect.url);\n          }\n        }\n        $this.notification_loader = true;\n      }\n    }\n  }\n};\n</script>\n<style lang=\"scss\" scoped>\n.btn:not(:disabled):not(.disabled) {\n  cursor: pointer;\n  box-shadow: none;\n}\n.no-notifications-found {\n  text-align: center;\n  padding: 11px 0;\n  font-size: 22px;\n}\n.wrapper-notifications {\n  position: relative;\n  min-height: 150px;\n  .white-row.loader-route.notification-loader {\n    top: 0;\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    z-index: 9;\n    .lds-sub-ripple {\n      display: block;\n      position: relative;\n      width: 80px;\n      height: 80px;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n  }\n}\n.nofication-body.not-len {\n  position: relative;\n  .white-row.loader-route.notification-loader {\n    position: absolute;\n    width: 96%;\n    top: 0;\n    height: 100%;\n    z-index: 9;\n    .lds-sub-ripple {\n      display: block;\n      position: relative;\n      width: 80px;\n      height: 80px;\n      top: 50%;\n      left: 50%;\n      transform: translate(-50%, -50%);\n    }\n  }\n}\nbody header .top-right .dropdown .nofication-body.not-len {\n  padding: 15px 0;\n  .mark-as-read.text-right {\n    padding: 0 15px;\n  }\n}\nbody\n  header\n  .top-right\n  .dropdown\n  .nofication-body\n  .not-groups\n  .notifications-listing\n  h5.date-heading {\n  padding: 0 15px;\n}\nbody\n  header\n  .top-right\n  .dropdown\n  .nofication-body\n  .not-groups\n  .notifications-listing\n  .list-group-flush\n  li.list-group-item {\n  padding: 12px 15px;\n  &.active {\n    z-index: 2;\n    color: #fff;\n    background-color: #f8f8f8;\n    border-color: #40af2a;\n  }\n}\n</style>\n"]}]}